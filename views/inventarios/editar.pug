extends ../layouts/layout.pug
block contenido
    style.
        label {
            font-weight: 700;
        }
    script.
        $(document).ready( function(){

            // Asignar precio en base a utilidad al 15%.
            $('#costo').on('keyup', function(){
                $('#pVenta').val((parseFloat(this.value) * 1.15).toFixed(2));
                $('#utilidad').val((parseFloat($('#pVenta').val()) - parseFloat(this.value)).toFixed(2));
                $('#pUtilidad').val(15.00);                
            });

            // Asignar valor de inventario en base a existencia
            $('#existencia').on('keyup', function(){
                $('#vInventario').val((parseFloat(this.value) * parseFloat($('#costo').val())).toFixed(2))
            });

            $('#pVenta').on('keyup', function(){
                $('#utilidad').val((parseFloat(this.value) - parseFloat($('#costo').val())).toFixed(2));
                var utilidad = ((parseFloat( $('#utilidad').val()) * 100) / parseFloat($('#costo').val())).toFixed(2);
                $('#pUtilidad').val(utilidad);
            });

            // Asignar precio de venta en base a utilidad
            $('#pUtilidad').on('keyup', function(){
                var utilidad = (parseFloat($('#costo').val()) * (parseFloat(this.value) / 100)).toFixed(2)
                $('#pVenta').val((parseFloat(utilidad) + parseFloat($('#costo').val())).toFixed(2));
                $('#utilidad').val((parseFloat(utilidad)).toFixed(2));
            });
        });

    .divider(style="margin-bottom: 20px;")
    form(role="form" method="post" action=`/inventarios/actualizar/${inventario.id}?_method=put`)
        div.container-form
            div.center-margin
                div.icono-form
                    div.icono-intermediate
                        i.fa.fas.fa-box
                div.titulo-form
                    label Editar inventario
                div.izquierdo-bloque
                    .form-group
                        .input-group
                            input.form-control(required type="text" name="tipo" value=inventario.tipo placeholder="Tipo" tabindex="1")
                    .form-group
                        .input-group
                            input.form-control(required type="text" name="descripcion" value=inventario.descripcion placeholder="Descripci√≥n" tabindex="3")
                    .form-group
                        .input-group
                            input.form-control(type="number" name="stock" value=inventario.stock placeholder="Stock")
                div.derecho-bloque
                    .form-group
                        .input-group
                            input.form-control(required type="number" name="entradas" value=inventario.entradas placeholder="Entrada" tabindex="4")
                        
                .divider(style="margin-bottom: 20px; margin-top: 20px;")
                .row
                    .col-lg-2.align-self-end.ml-auto
                        .form-group
                            .input-group.btn-form
                                input(type="submit" value="Actualizar" tabindex="7").form-control